<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>yysaki blog - ビルドしたpdfをsshfsからSkimで読む</title>
    <link rel="alternate" type="application/atom+xml" href="/atom" title="yysaki blog">
    <script src="/main.js" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-48038483-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-48038483-1');
    </script>
  </head>
  <body>
    <header class="interior-header green">
      <div class="row">
        <div class="medium-12 medium-centered centered-text columns">
          <h1>
            <a class="centered-text light" href="/">yysaki blog</a>
          </h1>
          <nav>
            <ul class="subnav hide-for-small">
              <li><a href="/">Home</a></li>
              <li class="with-input">
                <form action="https://google.com/search" method="get">
                  <input type="hidden" name="cx" value="004581985367838202738:guvugwiuerc"/>
                  <input class="input-text" type="text" name="q" placeholder="Search"/>
                </form>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <div class="row">
      <div class="large-8 medium-7 columns">
        <main role="main">
        <div class="date">2013-12-29</div>
<h1>ビルドしたpdfをsshfsからSkimで読む</h1>

<p>この度修論の開発環境を整えたのでブログ記事にしました。</p>

<h2 id="背景">背景</h2>

<p>研究室マシンでtexを編集しているのですが、作業結果のPDFを手元で快適に確認したいのです。 そこで、開発方針を以下のように整えました。</p>

<ul>
  <li>研究室マシンでtexの編集、ビルドを行う。</li>
  <li>sshfsをマウントすることで研究室マシンにアクセスする。</li>
  <li>Skimでsshfs上のpdfを閲覧し、自動更新モードで変更を反映する。</li>
</ul>

<p>環境は以下のとおりです。</p>

<ul>
  <li>ローカル: Mac OS X Mavericks、なるべくhomebrewを使う</li>
  <li>リモート: Linux、sshで接続</li>
</ul>

<h2 id="osxfuseのインストール">OSXFUSEのインストール</h2>

<p>まず下記URLからOSXFUSEをダウンロード、インストールします。</p>

<ul>
  <li><a href="http://sourceforge.net/projects/osxfuse/files/?source=navbar">FUSE for OS X – Browse Files at SourceForge.net</a></li>
</ul>

<p>先にhomebrewでfuse–4x-kextを試したのですが、正しくsshfsを動作させられなかったのでこちらを採用です。</p>

<h2 id="sshfsのインストール">sshfsのインストール</h2>

<p>以下のコマンドでインストールします。</p>

<pre><code>    $ sudo brew link fuse4x
    $ sudo brew install sshfs
    $ sudo /bin/cp -rfX /usr/local/Cellar/fuse4x-kext/0.9.2/Library/Extensions/fuse4x.kext /Library/Extensions
    $ sudo chmod +s /Library/Extensions/fuse4x.kext/Support/load_fuse4x
</code></pre>

<p>以下のコマンドでマウントします。</p>

<pre><code>    $ mkdir mnt
    $ sshfs -p 22 [User]@[Host]:[Dir] mnt
</code></pre>

<p>マウントが出来たかどうかはdfで確認出来ます。 またマウントを解除するには以下のコマンドです。</p>

<pre><code>    $ unmount mnt
</code></pre>

<h2 id="skimのインストール">Skimのインストール</h2>

<p>以下のURLからダウンロード出来ます。</p>

<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td>[Skim</td>
          <td>Home]<a href="http://skim-app.sourceforge.net">2</a></td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p>自動更新を行うため「環境設定… &gt; 同期する &gt; ファイルの変更をチェック」をちぇっくします。</p>

<h2 id="その他">その他</h2>

<ul>
  <li>バージョン管理はgithubのプライベートリポジトリで行っています。修論目的であれば学生用アカウントを申請することで、無料でMicroプランに加入できました。
    <ul>
      <li><a href="https://github.com/edu">Contact GitHub</a></li>
    </ul>
  </li>
  <li>
    <p>エディタはvimを使用しています。以下のように.vimrcを設定すれば”&lt;Space&gt;q”でtexのmake出来ます。</p>

    <pre><code>NeoBundle 'thinca/vim-quickrun'
silent! map &lt;Space&gt;q &lt;Plug&gt;(quickrun)
let g:quickrun_config['tex'] = {"command": "make", "exec" : "%c %o",  "outputter": "error:buffer:quickfix"}
</code></pre>
  </li>
  <li>学生共用のマシンで作業してるので、負荷を考え自動ビルドはやめときました。自分でmakeコマンドを叩きたくない人はOcamlのOmakeやRubyのGuardを使うと良さげです。</li>
</ul>

<h2 id="まとめ">まとめ</h2>

<p>以上で修論の開発環境を整えました。 開発マシンでtexの編集を行い、ビルドするとSkimの自動更新が反応して新しいPDFを表示してくれます。 Vimで&lt;Space&gt;qすることでPDFのレビューまで自動化出来たので概ね満足な結果です. (但しSkimが反映されるまでに10秒程かかります。sshfsの限界…)</p>

<h2 id="参考記事">参考記事</h2>

<ul>
  <li><a href="http://www.danielandrade.net/2013/10/28/mounting-a-filesystem-via-ssh-on-osx-mavericks/">Mounting a Filesystem via SSH on OSX Mavericks – DanielAndrade.net</a></li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>[Macでsshfsを使う</td>
          <td>yamaq blog]<a href="http://mount-q.com/yamaqblog/?p=15899">5</a></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><a href="http://macwiki.sourceforge.jp/wiki/index.php/Skim">MacWiki – Skim</a></li>
</ul>



        </main>
      </div>

      <div class="large-4 medium-5 columns">
        <aside class="sidebar">
          <div class="about">
            <h1>About Me</h1>
            <ul class="side-nav">
              <li role="menuitem"><a href="https://twitter.com/yysaki">@yysaki on Twitter</a></li>
              <li role="menuitem"><a href="https://github.com/yysaki">@yysaki on Github</a></li>
            </ul>
          </div>

          

<div class="recent">
  <h1>Recent Posts</h1>
  <ul class="side-nav">
    
      <li role="menuitem"><a href="/blog/2021/02/14/gh-pages-repository/">blogのリポジトリ運用の変更</a></li>
    
      <li role="menuitem"><a href="/blog/2020/06/07/terraform-hasura/">Terraform RegistryのModuleを使ってHasuraを立てる</a></li>
    
      <li role="menuitem"><a href="/blog/2020/04/29/react-tic-tac-toe/">Reactのチュートリアルで三目並べ</a></li>
    
      <li role="menuitem"><a href="/blog/2019/04/14/techbookfest-6/">技術書典6に参加した</a></li>
    
      <li role="menuitem"><a href="/blog/2019/01/02/happy-new-year/">昨年の振り返りと新年の抱負</a></li>
    
  </ul>
</div>


          <div class="twitter">
            <h1>Timeline</h1>
            <a class="twitter-timeline" data-lang="ja" data-width="271" data-height="600" href="https://twitter.com/yysaki?ref_src=twsrc%5Etfw">Tweets by yysaki</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
          </div>
        </aside>
      </div>
    </div>
  </body>
</html>
